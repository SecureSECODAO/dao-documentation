import { Steps } from "nextra-theme-docs";
import { Callout } from "nextra/components";

# Joining through Verification

<Callout type="warning" emoji="âš ">
  For verifying using Github, your account needs to be at least 1 year old.
</Callout>

One of the ways to join the DAO is by verifying your identity.
Currently, only [Proof of Humanity](https://proofofhumanity.id/)
and [GitHub](https://github.com/) are supported but we are working on adding more platforms.

## Verification guide

<Steps>
### Connect your wallet

First, you need to connect your wallet to the DAO. This can be done using Metamask or a variety of other wallets. Don't have
a wallet? Create one by following the steps [here](/joining/installing-metamask).

![wallet connected](/img/wallet-connected.png)

### Pick a platform

Navigate to the [verification page](https://dao.secureseco.org/verification). You will be presented with
a list of platforms that you can use to verify your identity on the left side of the page. Click the 'Verify' button of the
platform you wish to use.

![Pick one of the platforms](/img/pick-platform.png)

### Approve signature

Once you clicked the button, your wallet will notify you of a signature request. If you accept this request,
a specific message will be signed using your wallet, after which it is sent to our server. This is needed
to prove that you own the wallet.

### Sign in to the platform

After you have approved the signature request, you are redirected to the chosen platform. Here you
will need to sign in to your account. If you are already signed in, you will be redirected back to the
verification page immediately. Note that for Github, your account needs to be at least 1 year old.

### Finish verification

If everything goes to plan, a new card will become visible on the right side of the page under the "Pending verifications" section.
Clicking the "Finish" button on this card will prompt you to approve a transaction. Approving this transaction will call a smart contract function, which will finish your verification. After this transaction has been processed, you will successfully verified on the chosen platform.

![Finishing the verification process](/img/finish-verification.png)

### Claim your reward

If this is the first time you have verified your identity with the chosen platform, you will be able to claim a reward.
A new card will appear on the right side of the page, informing you how much you can claim. Clicking the "Claim reward" button
will once again ask you to approve a transaction. When the transaction has been processed, you will receive your reward!
The reward is given in the form of a token called `SECOREP`. This token is used to vote on proposals and will be explained in
more detail in the [SECOREP](/secorep) section.

![Claim your reward](/img/claim-reward.png)

</Steps>

## Reverification

Your verification status is not permanent. Your verifications will expire after a certain amount of time. The time until expiration is shown on the card of each platform. You can reset this time at any time by reverifying yourself. This can be done by clicking the "Reverify" button on the card of the platform you want to reverify with. The process for reverification is the same as the initial verification process, so you can follow the [steps above](#verification-guide).

![Reverification](/img/reverification.png)

## Unverification

It is also possible to unverify yourself for any of the available platforms. This can be done by clicking the "Remove" button on the card of the platform you want to unverify for. This will prompt you to approve a transaction. After the transaction has been processed, you will no longer be verified on the chosen platform.

## Technical details

### Process overview

Firstly, the user must visit the verification webpage and link their digital wallet (like Metamask, for instance) to the webapp. From there, the user must select one of the available identity verification providers, which currently includes Github and Proof of Humanity.

After selecting a provider, the user will be directed to the provider's site for identity verification. In the case of Github, this process is carried out via [OAuth](https://oauth.net/2/).

Following successful verification, the user is redirected back to our site, which receives a verification token that allows our server to confirm the user's identity. Once confirmed, the server generates a proof, which the user can then use to verify their identity on-chain.

The proof is assembled as follows:

    1. The following data elements are collated:
        - User's wallet address
        - A hash, derived from the combination of:
            - Unique user-specific data (e.g., the Github username)
            - The ID of the provider (e.g., "github")
            - An undisclosed secret
        - The current unix timestamp
    1. This assembled data is then signed using the private key of the owner of the verification smart contract, which by default is the wallet that deployed the smart contract.

The user can then use this proof to verify their identity on-chain using the smart contract. This is accomplished by invoking the `verifyAddress` function, which is as simple as clicking a button. Upon execution, the smart contract authenticates the proof, and if deemed valid, records the data on-chain. These pieces of data that contain information about a verification are what we call a **stamp**.

### Stamps

On-chain verifications are encapsulated using a construct known as a stamp. Every user can verify with multiple different providers, and will receive a stamp for each provider they verify with. Internally, the data structure for a stamp looks as follows:

```solidity
struct Stamp {
    string providerId; // Unique identifier for the provider ("github", "proofofhumanity", etc.)
    string userHash; // Hash of unique user data from the provider (username, email, etc.)
    uint64[] verifiedAt; // Array of timestamps indicating the times at which the user verified with this provider
}
```
